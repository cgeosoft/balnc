!function(){"use strict";angular.module("app.contacts",[])}(),function(){"use strict";function ContactsCompanyTransactionsController($stateParams,Transaction){function activate(){_loadTransactions().then(function(){_reloadChart()})}function _loadTransactions(){return vm.loading=!0,Transaction.find({filter:{where:{companyId:$stateParams.id},order:"date ASC"}}).$promise.then(function(data){var _total=0;_.each(data,function(transaction){_total+=transaction.amount,transaction.total=_total}),vm.Transactions=data})["finally"](function(){vm.loading=!1})}function _reloadChart(groupby){vm.Chart={labels:[],data:[[]]};var grouped_transactions=_.groupBy(vm.Transactions,function(transaction){return moment(transaction.date).format(groupby||"[W]ww MM/YYYY")});_.each(grouped_transactions,function(transactions,keydate){var _date_total=_.reduce(transactions,function(total,transaction){return Math.round(transaction.amount+total)},0);vm.Chart.labels.push(keydate),vm.Chart.data[0].push(_date_total)})}var vm=this;activate()}ContactsCompanyTransactionsController.$inject=["$stateParams","Transaction"],angular.module("app.contacts").controller("ContactsCompanyTransactionsController",ContactsCompanyTransactionsController)}(),function(){"use strict";function ContactsCompanyPersonsController(CompanyData){function activate(){vm.Persons=CompanyData.persons}var vm=this;activate()}ContactsCompanyPersonsController.$inject=["CompanyData"],angular.module("app.contacts").controller("ContactsCompanyPersonsController",ContactsCompanyPersonsController)}(),function(){"use strict";function ContactsCompanyOverviewController(){function activate(){}activate()}angular.module("app.contacts").controller("ContactsCompanyOverviewController",ContactsCompanyOverviewController)}(),function(){"use strict";function ContactsCompanyInfoController(){function activate(){}activate()}angular.module("app.contacts").controller("ContactsCompanyInfoController",ContactsCompanyInfoController)}(),function(){"use strict";function ContactsCompanyFilesController($stateParams){function activate(){}activate()}ContactsCompanyFilesController.$inject=["$stateParams"],angular.module("app.contacts").controller("ContactsCompanyFilesController",ContactsCompanyFilesController)}(),function(){"use strict";function ContactsCompanyEventsController($stateParams,Event){function activate(){_loadEvents()}function reload(){activate()}function _loadEvents(){return vm.loading=!0,Event.find({filter:{where:{date:{gt:_ranges[vm.params.range].from,lt:_ranges[vm.params.range].to},companyId:$stateParams.id},order:"date DESC"}}).$promise.then(function(data){vm.Events=data})["finally"](function(){vm.loading=!1})}var vm=this;vm.reload=reload,vm.params={range:"WEEK"};var _ranges={WEEK:{from:moment().subtract(7,"days"),to:moment().add(7,"days")},HALFMONTH:{from:moment().subtract(15,"days"),to:moment().add(15,"days")},MONTH:{from:moment().subtract(1,"month"),to:moment().add(1,"month")}};activate()}ContactsCompanyEventsController.$inject=["$stateParams","Event"],angular.module("app.contacts").controller("ContactsCompanyEventsController",ContactsCompanyEventsController)}(),function(){"use strict";angular.module("app._common",[])}(),function(){"use strict";function routerHelperProvider($locationProvider,$stateProvider,$urlRouterProvider){function RouterHelper($state){function configureStates(states,otherwisePath){states.forEach(function(state){var config={controllerAs:"vm"};angular.extend(config,state.config),config.views&&_.each(config.views,function(item){item.controllerAs="vm"}),$stateProvider.state(state.state,config)}),otherwisePath&&!hasOtherwise&&(hasOtherwise=!0,$urlRouterProvider.otherwise(otherwisePath))}function getStates(){return $state.get()}var hasOtherwise=!1,service={configureStates:configureStates,getStates:getStates};return service}this.$get=RouterHelper,RouterHelper.$inject=["$state"]}routerHelperProvider.$inject=["$locationProvider","$stateProvider","$urlRouterProvider"],angular.module("app._common").provider("routerHelper",routerHelperProvider)}(),function(){"use strict";function modalHelperProvider(){function modalHelper($uibModal,$q){function configureModals(modals){var _ret={};return angular.forEach(modals,function(modal){_ret[modal.modal]=function(obj){function ModalResultComplete(response){return response}function ModalResultFailed(reason){return reason&&"backdrop click"!==reason?$q.reject():void 0}var config={controllerAs:"vm",resolve:{ModalParams:function(){return obj||{}}}};return angular.extend(config,modal.config),$uibModal.open(config).result.then(ModalResultComplete)["catch"](ModalResultFailed)}}),_ret}var service={configureModals:configureModals};return service}modalHelper.$inject=["$uibModal","$q"],this.$get=modalHelper}angular.module("app._common").provider("modalHelper",modalHelperProvider)}(),function(){"use strict";function configHelperProvider(){function ConfigHelper(){function notifyConfig(configName,message){message=message||{},console.log("%c CONFIG - "+configName+" ","background: #9C27B0; color: #FFF",message)}var service={notifyConfig:notifyConfig};return service}this.$get=ConfigHelper,ConfigHelper.$inject=[]}angular.module("app._common").provider("configHelper",configHelperProvider)}(),function(){"use strict";function numberFixedLen(){return function(a,b){return(1e4+a+"").slice(-b)}}angular.module("app._common").filter("numberFixedLen",numberFixedLen)}(),function(){"use strict";function join(){return function(array,separator){return array?(separator||(separator=", "),array.join(separator)):""}}angular.module("app._common").filter("join",join)}(),function(){"use strict";function fromNow(){return function(date){return moment(date).fromNow()}}angular.module("app._common").filter("fromNow",fromNow)}(),function(){"use strict";function fileicon(){var _icons={"application/pdf":"fa-file-pdf-o","application/powerpoint":"fa-file-powerpoint-o","application/x-msword":"fa-file-word-o","application/x-msexcel":"fa-file-excel-o","application/x-mspowerpoint":"fa-file-powerpoint-o","audio/x-mpeg-3":"fa-file-audio-o","image/gif":"fa-file-image-o","image/png":"fa-file-image-o","image/tiff":"fa-file-image-o","image/jpeg":"fa-file-image-o","video/avi":"fa-file-video-o","video/mpeg":"fa-file-video-o","video/msvideo":"fa-file-video-o","video/quicktime":"fa-file-video-o","application/zip":"fa-file-zip-o"};return function(a){return _icons[a]||"fa-file-o"}}angular.module("app._common").filter("fileicon",fileicon)}(),function(){"use strict";function bytes(){return function(bytes,precision){if(isNaN(parseFloat(bytes))||!isFinite(bytes))return"-";"undefined"==typeof precision&&(precision=1);var units=["bytes","kB","MB","GB","TB","PB"],number=Math.floor(Math.log(bytes)/Math.log(1024));return(bytes/Math.pow(1024,Math.floor(number))).toFixed(precision)+" "+units[number]}}angular.module("app._common").filter("bytes",bytes)}(),function(){"use strict";function pwCheck(){return{require:"ngModel",restrict:"A",link:function(scope,elem,attrs,ctrl){var firstPassword="#"+attrs.pwCheck;elem.add(firstPassword).on("keyup",function(){scope.$apply(function(){var v=elem.val()===$(firstPassword).val();ctrl.$setValidity("pwmatch",v)})})}}}angular.module("app._common").directive("pwCheck",pwCheck)}(),function(){"use strict";function ngPrint(){function link(scope,element,attrs){element.on("click",function(){var elemToPrint=document.getElementById(attrs.printElementId);elemToPrint&&printElement(elemToPrint)});var beforePrint=function(){console.log("Functionality to run before printing.")},afterPrint=function(){console.log("Functionality to run after printing"),printSection.innerHTML=""};if(window.matchMedia){var mediaQueryList=window.matchMedia("print");mediaQueryList.addListener(function(mql){mql.matches?beforePrint():afterPrint()})}window.onbeforeprint=beforePrint,window.onafterprint=afterPrint}function printElement(elem){var domClone=elem.cloneNode(!0);printSection.appendChild(domClone),window.print()}var printSection=document.getElementById("printSection");return printSection||(printSection=document.createElement("div"),printSection.id="printSection",document.body.appendChild(printSection)),{link:link,restrict:"A"}}angular.module("app._common").directive("ngPrint",ngPrint)}(),function(){"use strict";function errSrc(){return{link:function(scope,element,attrs){attrs.ngSrc||attrs.$set("src",attrs.errSrc),element.bind("error",function(){return"REMOVE"==attrs.errSrc?void element.remove():void(attrs.src!=attrs.errSrc&&attrs.$set("src",attrs.errSrc))})}}}angular.module("app._common").directive("errSrc",errSrc)}(),function(){"use strict";function ngConfirmClick(){return{priority:-1,restrict:"A",link:function(scope,element,attrs){element.bind("click",function(e){var message=attrs.ngConfirmClick;message&&!confirm(message)&&(e.stopImmediatePropagation(),e.preventDefault())})}}}angular.module("app._common").directive("ngConfirmClick",ngConfirmClick)}(),function(){"use strict";angular.module("app._common").constant("topmenu",[{name:"States",link:"#",subtree:[{name:"state 1",link:"state1"},{name:"state 2",link:"state2"}]}])}(),function(){"use strict";angular.module("app",["ngResource","ngSanitize","ngCookies","ui.bootstrap","ui.router","ui.router.tabs","ui.navbar","chart.js","lbServices","app.auth","app.dashboard","app.contacts","app._common"])}(),function(){"use strict";function appRun($rootScope,$state,$stateParams){$rootScope.APP=APP,$rootScope.$on("$stateChangeSuccess",function(event,toState){toState.title?$rootScope.title=toState.title?toState.title:APP.description:$rootScope.title=null})}appRun.$inject=["$rootScope","$state","$stateParams"],angular.module("app").run(appRun)}(),function(){"use strict";function LocationConfig(configHelperProvider,$locationProvider){$locationProvider.html5Mode(!0)}LocationConfig.$inject=["configHelperProvider","$locationProvider"],angular.module("app._common").config(LocationConfig)}(),function(){"use strict";function LocationConfig($httpProvider){$httpProvider.defaults.withCredentials=!0,$httpProvider.defaults.useXDomain=!0,delete $httpProvider.defaults.headers.common["X-Requested-With"]}LocationConfig.$inject=["$httpProvider"],angular.module("app._common").config(LocationConfig)}(),function(){"use strict";angular.module("app.settings",[])}(),function(){"use strict";function SettingsController($state,SettingsService,SettingsModals){function activate(){}function ChangePassword(){SettingsModals.ChangePassword().then(function(){$state.go("auth.logout",{ref:"SIGNOUT"})})}var vm=this;vm.ChangePassword=ChangePassword,activate()}SettingsController.$inject=["$state","SettingsService","SettingsModals"],angular.module("app.settings").controller("SettingsController",SettingsController)}(),function(){"use strict";function ChangePasswordController($modalInstance,ModalParams,User,toaster){function activate(){}function Save(){vm.loading=!0,User.prototype$updateAttributes({id:User.getCurrentId(),password:vm.Password}).$promise.then(function(user){toaster.pop("success","Password Changed"),vm.loading=!1,$modalInstance.close()})}var vm=this;vm.Save=Save,activate()}ChangePasswordController.$inject=["$modalInstance","ModalParams","User","toaster"],angular.module("app.settings").controller("ChangePasswordController",ChangePasswordController)}(),function(){"use strict";angular.module("app.plists",[])}(),function(){"use strict";function PlistsController(PlistsService,PlistsModals){function activate(){vm.LoadPlists()}function LoadPlists(params){vm.loading=!0,PlistsService.GetPlists(params).then(function(plists){vm.Plists=plists})["finally"](function(){vm.loading=!1})}function AddPlist(){PlistsModals.PlistForm().then(function(){vm.LoadPlists()})}function ViewPlist(id){PlistsModals.PlistForm({ID:id}).then(function(){vm.LoadPlists()})}var vm=this;vm.AddPlist=AddPlist,vm.ViewPlist=ViewPlist,vm.LoadPlists=LoadPlists,activate()}PlistsController.$inject=["PlistsService","PlistsModals"],angular.module("app.plists").controller("PlistsController",PlistsController)}(),function(){"use strict";function PlistFormController($modalInstance,ModalParams,PlistsService){function activate(){vm.Plist.id&&(vm.loading=!0,PlistsService.GetPlist(vm.Plist.id).then(function(data){vm.Plist=data})["finally"](function(){vm.loading=!1}))}function Save(){vm.loading=!0,PlistsService.SavePlist(vm.Plist).then(function(){vm.loading=!1,$modalInstance.close()})}function Delete(){vm.loading=!0,PlistsService.DeletePlist(vm.Plist.id).then(function(){vm.loading=!1,$modalInstance.close()})}var vm=this;vm.Plist={id:ModalParams.ID||null,Participants:[]},vm.Save=Save,vm.Delete=Delete,activate()}PlistFormController.$inject=["$modalInstance","ModalParams","PlistsService"],angular.module("app.plists").controller("PlistFormController",PlistFormController)}(),function(){"use strict";angular.module("app.lotteries",[])}(),function(){"use strict";function LotteriesController($state,LotteriesService,LotteriesModals){function activate(){vm.LoadLotteries()}function LoadLotteries(){return vm.loading=!0,LotteriesService.GetLotteries().then(function(data){vm.Lotteries=data})["finally"](function(){vm.loading=!1})}function AddLottery(){LotteriesModals.LotteryInit().then(function(id){id&&$state.go("app.lotteries.lottery",{ID:id})})}var vm=this;vm.AddLottery=AddLottery,vm.LoadLotteries=LoadLotteries,activate()}LotteriesController.$inject=["$state","LotteriesService","LotteriesModals"],angular.module("app.lotteries").controller("LotteriesController",LotteriesController)}(),function(){"use strict";function LotteryController($state,LotteriesService,$stateParams){function activate(){vm.LoadLottery()}function LoadLottery(){vm.loading=!0,LotteriesService.GetLottery($stateParams.ID).then(function(data){vm.Lottery=data})["finally"](function(){vm.loading=!1})}function DeleteLottery(){vm.loading=!0,LotteriesService.DeleteLottery(vm.Lottery.id).then(function(){$state.go("app.lotteries.overview")})}var vm=this;vm.LoadLottery=LoadLottery,vm.DeleteLottery=DeleteLottery,activate()}LotteryController.$inject=["$state","LotteriesService","$stateParams"],angular.module("app.lotteries").controller("LotteryController",LotteryController)}(),function(){"use strict";function LotteryInitController($modalInstance,ModalParams,LotteriesService,PlistsService){function activate(){vm.LoadPlists()}function LoadPlists(){vm.loading=!0,PlistsService.GetPlists().then(function(data){vm.Plists=data})["finally"](function(){vm.loading=!1})}function Save(){LotteriesService.SaveLottery(vm.Lottery).then(function(resp){$modalInstance.close(resp.id)})}var vm=this;vm.Lottery={Name:"Lottery #"+(new Date).getTime()},vm.LoadPlists=LoadPlists,vm.Save=Save,activate()}LotteryInitController.$inject=["$modalInstance","ModalParams","LotteriesService","PlistsService"],angular.module("app.lotteries").controller("LotteryInitController",LotteryInitController)}(),function(){"use strict";function RoutesConfig(configHelper,routerHelper){routerHelper.configureStates(getStates())}function getStates(){return[{state:"app.contacts",config:{"abstract":!0,url:"/contacts",template:"<ui-view/>"}},{state:"app.contacts.overview",config:{title:"Contacts Overview",url:"/",templateUrl:"src/contacts/overview/view.html",controller:"ContactsOverviewController"}},{state:"app.contacts.person",config:{title:"Person",url:"/person/:id",templateUrl:"src/contacts/person/view.html",controller:"ContactsPersonController"}},{state:"app.contacts.company",config:{"abstract":!0,url:"/company/:id",templateUrl:"src/contacts/company/view.html",controller:"ContactsCompanyController"}},{state:"app.contacts.company.info",config:{title:"info",url:"/info",templateUrl:"src/contacts/company/info/view.html",controller:"ContactsCompanyInfoController"}},{state:"app.contacts.company.overview",config:{title:"overview",url:"/overview",templateUrl:"src/contacts/company/overview/view.html",controller:"ContactsCompanyOverviewController"}},{state:"app.contacts.company.persons",config:{title:"persons",url:"/persons",templateUrl:"src/contacts/company/persons/view.html",controller:"ContactsCompanyPersonsController"}},{state:"app.contacts.company.events",config:{title:"events",url:"/events",templateUrl:"src/contacts/company/events/view.html",controller:"ContactsCompanyEventsController"}},{state:"app.contacts.company.transactions",config:{title:"transactions",url:"/transactions",templateUrl:"src/contacts/company/transactions/view.html",controller:"ContactsCompanyTransactionsController"}},{state:"app.contacts.company.files",config:{title:"files",url:"/files",templateUrl:"src/contacts/company/files/view.html"}}]}RoutesConfig.$inject=["configHelper","routerHelper"],angular.module("app.contacts").run(RoutesConfig)}(),function(){"use strict";function ContactsModals(modalHelper){function getModals(){return[{modal:"AddPerson",config:{templateUrl:"src/contacts/addperson/view.html",controller:"ContactsAddPersonController",size:"sm"}},{modal:"AddCompany",config:{templateUrl:"src/contacts/addcompany/view.html",controller:"ContactsAddCompanyController",size:"sm"}},{modal:"AddEvent",config:{templateUrl:"src/contacts/addevent/view.html",controller:"ContactsAddEventController"}},{modal:"ExportImport",config:{templateUrl:"src/contacts/exportimport/view.html",controller:"ContactsExportImportController"}}]}return modalHelper.configureModals(getModals())}angular.module("app.contacts").factory("ContactsModals",ContactsModals),ContactsModals.$inject=["modalHelper"]}(),function(){"use strict";function ContactsTopMenuController($state,ContactsModals){function activate(){}function AddCompany(){ContactsModals.AddCompany().then(function(response){$state.go("app.contacts.company",{id:response.id})})}function AddPerson(){ContactsModals.AddPerson().then(function(response){$state.go("app.contacts.person",{id:response.id})})}function AddEvent(){ContactsModals.AddEvent().then(function(response){$state.go("app.contacts.events.event",{id:response.id})})}function ExportImport(){ContactsModals.ExportImport().then(function(){})}var vm=this;vm.AddCompany=AddCompany,vm.AddPerson=AddPerson,vm.AddEvent=AddEvent,vm.ExportImport=ExportImport,activate()}ContactsTopMenuController.$inject=["$state","ContactsModals"],angular.module("app.contacts").controller("ContactsTopMenuController",ContactsTopMenuController)}(),function(){"use strict";function ContactsOverviewController(Company){function activate(){_getAccessed()}function _getAccessed(){vm.loading_accessed=!0,Company.find({filter:{limit:10,order:"lastAccess DESC"}}).$promise.then(function(_companies){vm.accessed=_companies})["finally"](function(){vm.loading_accessed=!1})}var vm=this;activate()}ContactsOverviewController.$inject=["Company"],angular.module("app.contacts").controller("ContactsOverviewController",ContactsOverviewController)}(),function(){"use strict";function ContactsContactController(){function activate(){}activate()}angular.module("app.contacts").controller("ContactsContactController",ContactsContactController)}(),function(){"use strict";function ContactsCompanyController($stateParams,Company){function activate(){vm.Company=Company.findById({id:$stateParams.id})}var vm=this;vm.Tabs=[{heading:{icon:"bars",title:"Info"},route:"app.contacts.company.info",params:{"class":"visible-xs visible-sm"}},{heading:{icon:"bell-o","class":"hidden-xs",title:"Overview"},route:"app.contacts.company.overview"},{heading:{icon:"calendar","class":"hidden-xs",title:"Events"},route:"app.contacts.company.events"},{heading:{icon:"users","class":"hidden-xs",title:"Persons"},route:"app.contacts.company.persons"},{heading:{icon:"money","class":"hidden-xs",title:"Transactions"},route:"app.contacts.company.transactions"},{heading:{icon:"files-o","class":"hidden-xs",title:"Files"},route:"app.contacts.company.files"}],activate()}ContactsCompanyController.$inject=["$stateParams","Company"],angular.module("app.contacts").controller("ContactsCompanyController",ContactsCompanyController)}(),function(){"use strict";function ContactsAddCompanyController($modalInstance,Company){function activate(){loadCompanies()}function loadCompanies(){vm.Companies=Company.find({filter:{order:"name ASC"}})}function Save(){Company.create(vm.Company).$promise.then(function(_company){$modalInstance.close(_company)})}var vm=this;vm.Save=Save,activate()}ContactsAddCompanyController.$inject=["$modalInstance","Company"],angular.module("app.contacts").controller("ContactsAddCompanyController",ContactsAddCompanyController)}(),function(){"use strict";function ContactsAddPersonController($modalInstance,ModalParams,Company){function activate(){loadCompanies()}function loadCompanies(){vm.Companies=Company.find({filter:{order:"name ASC"}})}function Save(){}var vm=this;vm.Save=Save,activate()}ContactsAddPersonController.$inject=["$modalInstance","ModalParams","Company"],angular.module("app.contacts").controller("ContactsAddPersonController",ContactsAddPersonController)}(),function(){"use strict";angular.module("app.auth",[])}(),function(){"use strict";function AuthLoginController($stateParams,$state,LoginMessages,User){function activate(){$stateParams.ref&&_signMessage($stateParams.ref.toUpperCase())}function SignIn(){vm.loading=!0,vm.Alert=!1,User.login(angular.copy(vm.credentials)).$promise.then(function(response){$state.go("app.dashboard")},function(rejection){vm.credentials.password=null,vm.loading=!1,_signMessage(rejection.data.error.code.toUpperCase())})}function _signMessage(code){vm.Alert=LoginMessages[code]}var vm=this;vm.loading=!1,vm.SignIn=SignIn,activate()}AuthLoginController.$inject=["$stateParams","$state","LoginMessages","User"],angular.module("app.auth").controller("AuthLoginController",AuthLoginController)}(),function(){"use strict";function RoutesConfig(configHelper,routerHelper){routerHelper.configureStates(getStates(),"/")}function getStates(){return[{state:"app",config:{"abstract":!0,resolve:{isAuthenticated:function($state,User,$timeout){$timeout(function(){return User.isAuthenticated()?void 0:($state.go("auth.login"),!1)})}},views:{"":{templateUrl:"src/_common/views/layout.html",controller:function(User){var vm=this;User.getCurrent().$promise.then(function(_user){vm.username=_user.username})}},"menu-contacts@app":{templateUrl:"src/contacts/topmenu/view.html",controller:"ContactsTopMenuController"}}}}]}RoutesConfig.$inject=["configHelper","routerHelper"],angular.module("app._common").run(RoutesConfig)}(),function(){"use strict";angular.module("app.static",[])}(),function(){"use strict";function RoutesConfig(configHelper,routerHelper){routerHelper.configureStates(getStates())}function getStates(){return[{state:"app.about",config:{title:"About",url:"/about",templateUrl:"views/static/pages/about.html",controller:function(){var vm=this;vm.libs=[{name:"AngularJS",href:"https://angularjs.org/"}]}}},{state:"app.tos",config:{title:"Terms of Use",url:"/tos",templateUrl:"views/static/pages/tos.html"}}]}RoutesConfig.$inject=["configHelper","routerHelper"],angular.module("app.static").run(RoutesConfig)}(),function(){"use strict";function SettingsService($resource){function GetSettings(params){return $resource(APP.Service+"_design/models/_view/Settings").get().$promise.then(function(data){return _.chain(data.rows).map(function(item){return item.value}).sortBy(function(item){return item.DrewAt||0}).reverse().value()})}function GetSetting(id){return $resource(APP.Service+id).get().$promise.then(function(data){return data})}function SaveSetting(Setting){return Setting.Type="Setting",$resource(APP.Service).save(Setting).$promise.then(function(data){return data})}function DeleteSetting(Setting){return Setting._deleted=!0,Setting.DeletedAt=new Date,$resource(APP.Service).save(Setting).$promise}var service={GetSettings:GetSettings,GetSetting:GetSetting,SaveSetting:SaveSetting,DeleteSetting:DeleteSetting};return service}SettingsService.$inject=["$resource"],angular.module("app.settings").factory("SettingsService",SettingsService)}(),function(){"use strict";function appRun(routerHelper){routerHelper.configureStates(getStates())}function getStates(){return[{state:"app.settings",config:{url:"/settings",controller:"SettingsController",templateUrl:"src/settings/overview/view.html"}}]}appRun.$inject=["routerHelper"],angular.module("app.settings").run(appRun)}(),function(){"use strict";function SettingsModals(modalHelper){function getModals(){return[{modal:"ChangePassword",config:{templateUrl:"src/settings/changepassword/view.html",controller:"ChangePasswordController",size:"sm"}}]}return modalHelper.configureModals(getModals())}angular.module("app.lotteries").factory("SettingsModals",SettingsModals),SettingsModals.$inject=["modalHelper"]}(),function(){"use strict";function PlistsService($resource,Plist){function GetPlists(params){var params=params||{};return Plist.find({filter:{order:params.order||"CreatedAt DESC"}}).$promise.then(function(data){return data})}function GetPlist(id){return Plist.findById({id:id}).$promise.then(function(item){return item})}function SavePlist(plist){return plist.id||(plist.CreatedAt=new Date),Plist.updateOrCreate(plist).$promise.then(function(item){return item})}function DeletePlist(id){return Plist.deleteById({id:id}).$promise.then(function(item){return item})}var service={GetPlists:GetPlists,GetPlist:GetPlist,SavePlist:SavePlist,DeletePlist:DeletePlist};return service}PlistsService.$inject=["$resource","Plist"],angular.module("app.plists").factory("PlistsService",PlistsService)}(),function(){"use strict";function appRun(routerHelper){routerHelper.configureStates(getStates())}function getStates(){return[{state:"app.plists",config:{url:"/plists",controller:"PlistsController",templateUrl:"src/plists/overview/view.html"}}]}angular.module("app.plists").run(appRun),appRun.$inject=["routerHelper"]}(),function(){"use strict";function PlistsModals(modalHelper){function getModals(){return[{modal:"PlistForm",config:{templateUrl:"src/plists/form/view.html",controller:"PlistFormController",size:"md",backdrop:"static"}}]}return modalHelper.configureModals(getModals())}angular.module("app.plists").factory("PlistsModals",PlistsModals),PlistsModals.$inject=["modalHelper"]}(),function(){"use strict";function LotteriesService($resource,Lottery){function GetLotteries(params){var params=params||{};return Lottery.find({filter:{order:params.order||"CreatedAt DESC"}}).$promise.then(function(data){return data})}function GetLottery(id){return Lottery.findById({id:id}).$promise.then(function(item){return item})}function SaveLottery(lottery){return lottery.DrewAt=new Date,lottery.Participants=_.shuffle(lottery.Participants),Lottery.create(lottery).$promise.then(function(item){return item})}function DeleteLottery(id){return Lottery.deleteById({id:id}).$promise.then(function(item){return item})}var service={GetLotteries:GetLotteries,GetLottery:GetLottery,SaveLottery:SaveLottery,DeleteLottery:DeleteLottery};return service}LotteriesService.$inject=["$resource","Lottery"],angular.module("app.lotteries").factory("LotteriesService",LotteriesService)}(),function(){"use strict";function appRun(routerHelper){routerHelper.configureStates(getStates())}function getStates(){return[{state:"app.lotteries",config:{"abstract":!0,template:"<ui-view/>"}},{state:"app.lotteries.overview",config:{url:"/",controller:"LotteriesController",templateUrl:"src/lotteries/overview/view.html"}},{state:"app.lotteries.lottery",config:{url:"/lottery/:ID",controller:"LotteryController",templateUrl:"src/lotteries/lottery/view.html"}}]}angular.module("app.lotteries").run(appRun),appRun.$inject=["routerHelper"]}(),function(){"use strict";function LotteriesModals(modalHelper){function getModals(){return[{modal:"LotteryInit",config:{templateUrl:"src/lotteries/init/view.html",controller:"LotteryInitController",size:"sm"}}]}return modalHelper.configureModals(getModals())}angular.module("app.lotteries").factory("LotteriesModals",LotteriesModals),LotteriesModals.$inject=["modalHelper"]}(),function(){"use strict";angular.module("app.dashboard",[])}(),function(){"use strict";function RoutesConfig(configHelper,routerHelper){routerHelper.configureStates(getStates())}function getStates(){return[{state:"app.dashboard",config:{title:"Dashboard",url:"/",templateUrl:"src/dashboard/view.html",controller:"DashboardController"}}]}RoutesConfig.$inject=["configHelper","routerHelper"],angular.module("app.dashboard").run(RoutesConfig)}(),function(){"use strict";function DashboardController(){function activate(){vm.news=_.sortBy([{date:"Mon Dec 14 2015 21:45:38 GMT+0000",content:"Tempor ut qui non mollit qui.",title:"ea enim veniam laboris ullamco",url:"http://google.com"},{date:"Sun Dec 06 2015 21:45:38 GMT+0000",content:"Officia id nulla nulla id ipsum minim.",title:"cillum aute deserunt labore est",url:"http://google.com"},{date:"Tue Dec 08 2015 21:45:38 GMT+0000",content:"Ullamco ut voluptate aliqua laboris nostrud.",title:"velit occaecat adipisicing tempor sit",url:"http://google.com"},{date:"Fri Dec 11 2015 21:45:38 GMT+0000",content:"Ipsum nisi non adipisicing ex aute veniam.",title:"non do ipsum et cillum",url:"http://google.com"}],"date")}var vm=this;activate()}angular.module("app.dashboard").controller("DashboardController",DashboardController)}(),function(){"use strict";function appRun(routerHelper){routerHelper.configureStates(getStates())}function getStates(){return[{state:"auth",config:{"abstract":!0,template:"<ui-view/>"}},{state:"auth.login",config:{url:"/login",params:{ref:null},templateUrl:"src/auth/login/view.html",controller:"AuthLoginController"}},{state:"auth.logout",config:{url:"/logout",template:"<ui-view/>",controller:function(User,$state){User.logout().$promise.then(function(){})["finally"](function(){localStorage.clear(),$state.go("auth.login",{ref:"SIGNOUT"})})}}}]}angular.module("app.auth").run(appRun),appRun.$inject=["routerHelper"]}(),function(){"use strict";function AuthInterceptor($q,$injector,$cookies){return{responseError:function(rejection){if(console.log("rejection",rejection),401===rejection.status&&"/api/Users/login"!=rejection.config.url){localStorage.clear();var $state=$injector.get("$state");$state.go("auth.login",{ref:"SESSIONEND"})}return $q.reject(rejection)}}}function AuthInterceptorConfig($httpProvider){$httpProvider.interceptors.push("AuthInterceptor")}AuthInterceptor.$inject=["$q","$injector","$cookies"],AuthInterceptorConfig.$inject=["$httpProvider"],angular.module("app.auth").config(AuthInterceptorConfig).factory("AuthInterceptor",AuthInterceptor)}(),function(){"use strict";angular.module("app.auth").constant("LoginMessages",{SESSIONEND:{Type:"danger",Message:"You were signed out",Details:"Probably your session was timed out"},SIGNOUT:{Type:"success",Message:"You were signed out",Details:"You may login again using the form"},REGISTERED:{Type:"success",Message:"Your account is ready, you can login now",Details:!1},AUTHERROR:{Type:"danger",Message:"Authentication Error",Details:null},UNAVAILABLE:{Type:"danger",Message:"Service is not available",Details:"Please try again later. If the problem insist, contact your system administrator"},LOGIN_FAILED:{Type:"danger",Message:"Name or password is incorrect",Details:"Please try again"}})}(),function(){"use strict";function appRun($rootScope,$state,$stateParams){$rootScope.APP=APP,$rootScope.$on("$stateChangeStart",function(evt,to,params){to.redirectTo&&(evt.preventDefault(),$state.go(to.redirectTo,params))})}appRun.$inject=["$rootScope","$state","$stateParams"],angular.module("app").run(appRun)}(),function(){window.APP={name:"Balance",description:"Christos' CRM tool that you need too",version:"0.1.0",repository:"https://github.com/ChristosGeorgiou/balance.git",author:{name:"Christos Georgiou",email:"xris.georgiou@gmail.com",url:"http://christosgeorgiou.gr"},config:{client:{name:"Demo Company"},database:"balance",roles:["ADMIN","MEMBER"],users:[{username:"admin",email:"admin@admin.com",password:"admin",role:"ADMIN"},{username:"member",email:"member@member.com",password:"member",role:"MEMBER"}]}}}();
//# sourceMappingURL=app.min.js.map
